(this["webpackJsonpbb-frontend"]=this["webpackJsonpbb-frontend"]||[]).push([[0],{124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(25),s=a.n(l),o=(a(96),a(24)),c=a(7),d=a(11),i=a(26),u=a(82),m=a(83),E=a(89),p=a(6),h={items:[],loading:!1},v={auth:{}},b={token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!0,user:null},g=Object(i.combineReducers)({item:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ITEMS":return Object(p.a)(Object(p.a)({},e),{},{items:t.payload,loading:!1});case"DELETE_ITEM":return Object(p.a)(Object(p.a)({},e),{},{items:e.items.filter((function(e){return e._id!==t.payload}))});case"ADD_ITEM":return Object(p.a)(Object(p.a)({},e),{},{items:[t.payload].concat(Object(E.a)(e.items))});case"ITEMS_LOADING":return Object(p.a)(Object(p.a)({},e),{},{loading:!0});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_AUTH_ERRORS":return Object(p.a)(Object(p.a)({},e),{},{auth:t.payload});case"CLEAR_AUTH_ERRORS":return Object(p.a)(Object(p.a)({},e),{},{auth:{}});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case"USER_LOADED":return Object(p.a)(Object(p.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(p.a)(Object(p.a)(Object(p.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(p.a)(Object(p.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}}}),S=[m.a],I=Object(i.createStore)(g,{},Object(u.composeWithDevTools)(i.applyMiddleware.apply(void 0,S))),f=a(35),j=a.n(f),y=function(e){var t=e().auth.token,a={headers:{"Content-type":"application/json"}};return t&&(a.headers["x-auth-token"]=t),a},O=a(34),w=a(29),L=a(70),C=a(46),k=a(31),A=a(21),N=a(18);N.b,N.h,N.a,N.g;function R(e){var t=Object(d.c)(),a=Object(d.d)((function(e){return e.auth})),n=(Object(c.g)(),r.a.useState(0)),l=Object(w.a)(n,2);l[0],l[1];return r.a.createElement(L.a,{bg:"dark",variant:"dark",expand:"lg",sticky:"top"},r.a.createElement(L.a.Brand,null,"Home"),!0===a.isAuthenticated?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"mr-auto"}),r.a.createElement(C.a,null,r.a.createElement(k.a,{variant:"outline-warning",onClick:function(){t({type:"LOGOUT_SUCCESS"})}},r.a.createElement(A.a,{icon:N.d,fixedWidth:!0}),"Sign Out"))):null)}var B=a(64),_=a(13),T=a(33);function D(e){var t=Object(d.c)(),a=Object(d.d)((function(e){return e.auth})),n=Object(d.d)((function(e){return e.error})),l=Object(c.g)(),s=r.a.useState(""),o=Object(w.a)(s,2),i=o[0],u=o[1],m=r.a.useState(""),E=Object(w.a)(m,2),p=E[0],h=E[1];return r.a.useEffect((function(){!0===a.isAuthenticated&&(console.log("login success"),l.push("/"))}),[a,l]),r.a.useEffect((function(){0!==Object.keys(n.auth).length&&(console.log("auth error"),console.log(n.auth))}),[n]),r.a.createElement(O.a,{className:"p-5"},r.a.createElement(B.a,null,r.a.createElement("h1",{className:"header"},"Welcome To ABC"),r.a.createElement(_.a,{noValidate:!0,onSubmit:function(e){e.preventDefault(),t(function(e){var t=e.username,a=e.password;return function(e){var n=JSON.stringify({username:t,password:a});j.a.post("".concat("https://bbm-heroku.herokuapp.com","/api/auth"),n,{headers:{"Content-Type":"application/json"}}).then((function(t){return e({type:"LOGIN_SUCCESS",payload:t.data})})).catch((function(t){console.log(t),e({type:"CLEAR_AUTH_ERRORS"}),e({type:"UPDATE_AUTH_ERRORS",payload:t.response.data}),e({type:"LOGIN_FAIL"})}))}}({username:i,password:p}))}},r.a.createElement(_.a.Group,{controlId:"formUsername"},r.a.createElement(T.a,null,r.a.createElement(T.a.Prepend,null,r.a.createElement(T.a.Text,null,r.a.createElement(A.a,{icon:N.f,fixedWidth:!0}))),r.a.createElement(_.a.Control,{type:"text",placeholder:"Username",value:i,onChange:function(e){return u(e.target.value)},isInvalid:n.auth.hasOwnProperty("username"),required:!0}),r.a.createElement(_.a.Control.Feedback,{type:"invalid"},n.auth.hasOwnProperty("username")?n.auth.username:""))),r.a.createElement(_.a.Group,{controlId:"formPassword"},r.a.createElement(T.a,null,r.a.createElement(T.a.Prepend,null,r.a.createElement(T.a.Text,null,r.a.createElement(A.a,{icon:N.c,fixedWidth:!0}))),r.a.createElement(_.a.Control,{type:"password",placeholder:"Password",value:p,onChange:function(e){return h(e.target.value)},isInvalid:n.auth.hasOwnProperty("password"),required:!0}),r.a.createElement(_.a.Control.Feedback,{type:"invalid"},n.auth.hasOwnProperty("password")?n.auth.password:""))),r.a.createElement(k.a,{variant:"primary",type:"submit"},"Sign In"))))}var Y=a(37),U=a(43),M=a(22),x=a(19),G=a(8),H=a(44);var P=a(17),W=a.n(P),F=[{id:1,name:"A Level 2",branch:"Branch A",tutor:["A","B"],periodStart:W()("2019-08-23"),periodEnd:W()("2019-12-23"),courseStatus:"Completed",totalLesson:12,lastLesson:12,reviewStatus:"Completed"},{id:3,name:"B Level 2",branch:"Branch A",tutor:["A"],periodStart:W()("2020-04-10"),periodEnd:null,courseStatus:"Ongoing",totalLesson:12,lastLesson:7,reviewStatus:"Ongoing"}],J=[{id:5,name:"A Level 2 (Summer Camp)",branch:"Branch A",tutor:["A","B"],periodStart:W()("2019-07-14"),periodEnd:W()("2019-08-29"),courseStatus:"Completed",totalLesson:6,lastLesson:6,reviewStatus:"Completed"},{id:6,name:"B Level 2 (Summer Camp)",branch:"Branch A",tutor:["A"],periodStart:W()("2020-07-10"),periodEnd:W()("2020-08-29"),courseStatus:"Cancelled",totalLesson:6,lastLesson:0,reviewStatus:null}],q=(W()("2020-04-10"),[{id:2,name:"A Level 2",branch:"Branch B",tutor:["B"],periodStart:W()("2019-08-23"),periodEnd:W()("2019-12-23"),courseStatus:"Completed",totalLesson:12,lastLesson:12,reviewStatus:"Completed"},{id:4,name:"B Level 2",branch:"Branch B",tutor:["B"],periodStart:W()("2020-04-10"),periodEnd:null,courseStatus:"Ongoing",totalLesson:12,lastLesson:7,reviewStatus:"Ongoing"}]);function K(e){Object(d.c)();var t=Object(c.g)(),a=function(e,a){t.push("/course/".concat(e))};return r.a.useEffect((function(){}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,null,r.a.createElement(x.a,null,r.a.createElement(G.a,{className:"m-3"},r.a.createElement(G.a.Body,null,r.a.createElement(G.a.Title,null,r.a.createElement(Y.a,{variant:"primary"},"Regular Course")),r.a.createElement(U.a,{striped:!0,hover:!0,borderless:!0,responsive:"xl"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"30%"}},"Name"),r.a.createElement("th",{style:{width:"15%"}},"Period"),r.a.createElement("th",{style:{width:"10%"}},"Branch"),r.a.createElement("th",{style:{width:"25%"}},"Lesson"),r.a.createElement("th",{style:{width:"10%"}},"Course Status"),r.a.createElement("th",{style:{width:"10%"}},"Review Status"))),r.a.createElement("tbody",null,F.map((function(e,t){return r.a.createElement("tr",{style:{cursor:"pointer"},key:t,onClick:function(){return a(e.id)}},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.periodStart.format("YYYY-MM-DD")," ~ ",null!==e.periodEnd?e.periodEnd.format("YYYY-MM-DD"):"Now"),r.a.createElement("td",null,e.branch),r.a.createElement("td",null,r.a.createElement(H.a,{label:e.lastLesson,variant:"Completed"===e.courseStatus?"success":"Cancelled"===e.courseStatus?"danger":"primary",now:"Cancelled"===e.courseStatus?e.totalLesson:Math.round(e.lastLesson/e.totalLesson*100)})),r.a.createElement("td",null,e.courseStatus),r.a.createElement("td",null,e.reviewStatus))})))))))),r.a.createElement(M.a,null,r.a.createElement(x.a,null,r.a.createElement(G.a,{className:"m-3"},r.a.createElement(G.a.Body,null,r.a.createElement(G.a.Title,null,r.a.createElement(Y.a,{variant:"warning"},"Summer Camp")),r.a.createElement(U.a,{striped:!0,hover:!0,borderless:!0,responsive:"xl"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"30%"}},"Name"),r.a.createElement("th",{style:{width:"15%"}},"Period"),r.a.createElement("th",{style:{width:"10%"}},"Branch"),r.a.createElement("th",{style:{width:"25%"}},"Lesson"),r.a.createElement("th",{style:{width:"10%"}},"Course Status"),r.a.createElement("th",{style:{width:"10%"}},"Review Status"))),r.a.createElement("tbody",null,J.map((function(e,t){return r.a.createElement("tr",{style:{cursor:"pointer"},key:t,onClick:function(){return a(e.id)}},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.periodStart.format("YYYY-MM-DD")," ~ ",null!==e.periodEnd?e.periodEnd.format("YYYY-MM-DD"):"Now"),r.a.createElement("td",null,e.branch),r.a.createElement("td",null,r.a.createElement(H.a,{label:e.lastLesson,variant:"Completed"===e.courseStatus?"success":"Cancelled"===e.courseStatus?"danger":"primary",now:"Cancelled"===e.courseStatus?e.totalLesson:Math.round(e.lastLesson/e.totalLesson*100)})),r.a.createElement("td",null,e.courseStatus),r.a.createElement("td",null,e.reviewStatus))})))))))),r.a.createElement(M.a,null,r.a.createElement(x.a,null,r.a.createElement(G.a,{className:"m-3"},r.a.createElement(G.a.Body,null,r.a.createElement(G.a.Title,null,r.a.createElement(Y.a,{variant:"info"},"Make-up Lesson")),"N/A")))),r.a.createElement(M.a,null,r.a.createElement(x.a,null,r.a.createElement(G.a,{className:"m-3"},r.a.createElement(G.a.Body,null,r.a.createElement(G.a.Title,null,r.a.createElement(Y.a,{variant:"indigo"},"Review Class")),r.a.createElement(U.a,{striped:!0,hover:!0,borderless:!0,responsive:"xl"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"30%"}},"Name"),r.a.createElement("th",{style:{width:"15%"}},"Period"),r.a.createElement("th",{style:{width:"10%"}},"Branch"),r.a.createElement("th",{style:{width:"25%"}},"Lesson"),r.a.createElement("th",{style:{width:"10%"}},"Course Status"),r.a.createElement("th",{style:{width:"10%"}},"Review Status"))),r.a.createElement("tbody",null,q.map((function(e,t){return r.a.createElement("tr",{style:{cursor:"pointer"},key:t,onClick:function(){return a(e.id)}},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.periodStart.format("YYYY-MM-DD")," ~ ",null!==e.periodEnd?e.periodEnd.format("YYYY-MM-DD"):"Now"),r.a.createElement("td",null,e.branch),r.a.createElement("td",null,r.a.createElement(H.a,{label:e.lastLesson,variant:"Completed"===e.courseStatus?"success":"Cancelled"===e.courseStatus?"danger":"primary",now:"Cancelled"===e.courseStatus?e.totalLesson:Math.round(e.lastLesson/e.totalLesson*100)})),r.a.createElement("td",null,e.courseStatus),r.a.createElement("td",null,e.reviewStatus))})))))))))}var V=a(42),z=a(85),Q=a(86),X=a(87),Z=a(84),$={courseId:1,lessonId:1,lessonNumber:1,lessonName:"Lesson 1 Intro",tutor:["5f75488a8c546616ec59e691"],reviewer:["5f7548cd8c546616ec59e692"],objectives:[{objectiveId:1,description:"lesson 1 objective 1"},{objectiveId:2,description:"lesson 1 objective 2"},{objectiveId:3,description:"lesson 1 objective 3"}],students:[{studentId:1,name:"Student A"},{studentId:2,name:"Student B"},{studentId:3,name:"Student C"}],assessments:[{assessmentId:1,studentId:1,studentName:"Student A",courseId:1,lessonId:1,review:[{reviewerId:2,comment:""}],remarks:[{remarkerId:1,comment:""}],grading:[{objectiveId:1,description:"lesson 1 objective 1",grade:5},{objectiveId:2,description:"lesson 1 objective 2",grade:3},{objectiveId:3,description:"lesson 1 objective 3",grade:4}]},{assessmentId:2,studentId:2,studentName:"Student B",courseId:1,lessonId:1,review:[{reviewerId:2,comment:""}],remarks:[{remarkerId:1,comment:""}],grading:[{objectiveId:1,description:"lesson 1 objective 1",grade:5},{objectiveId:2,description:"lesson 1 objective 2",grade:4},{objectiveId:3,description:"lesson 1 objective 3",grade:3}]},{assessmentId:3,studentId:3,studentName:"Student C",courseId:1,lessonId:1,review:[{reviewerId:2,comment:""}],remarks:[{remarkerId:1,comment:""}],grading:[{objectiveId:1,description:"lesson 1 objective 1",grade:5},{objectiveId:2,description:"lesson 1 objective 2",grade:3},{objectiveId:3,description:"lesson 1 objective 3",grade:3}]}]},ee={courseId:1,lessonId:2,lessonNumber:2,lessonName:"Lesson 2 Hands-on Coding",tutor:["5f75488a8c546616ec59e691"],reviewer:["5f7548cd8c546616ec59e692"],objectives:[{objectiveId:4,description:"Recap on lesson 1"},{objectiveId:5,description:"Hello World"},{objectiveId:6,description:"Advance Hello World"}],students:[{studentId:1,name:"Student A"},{studentId:2,name:"Student B"},{studentId:3,name:"Student C"}],assessments:[{assessmentId:4,studentId:1,studentName:"Student A",courseId:1,lessonId:2,review:[{reviewerId:2,comment:"make-up lesson?"}],remarks:[{remarkerId:1,comment:"Forget lesson 1 content"}],grading:[{objectiveId:4,description:"Recap on lesson 1",grade:1},{objectiveId:5,description:"Hello World",grade:0},{objectiveId:6,description:"Advance Hello World",grade:0}]},{assessmentId:5,studentId:2,studentName:"Student B",courseId:1,lessonId:2,review:[{reviewerId:2,comment:""}],remarks:[{remarkerId:1,comment:""}],grading:[{objectiveId:4,description:"Recap on lesson 1",grade:5},{objectiveId:5,description:"Hello World",grade:5},{objectiveId:6,description:"Advance Hello World",grade:3}]},{assessmentId:6,studentId:3,studentName:"Student C",courseId:1,lessonId:2,review:[{reviewerId:2,comment:""}],remarks:[{remarkerId:1,comment:""}],grading:[{objectiveId:4,description:"Recap on lesson 1",grade:5},{objectiveId:5,description:"Hello World",grade:5},{objectiveId:6,description:"Advance Hello World",grade:4}]}]};function te(e){Object(d.c)(),Object(c.g)();var t=r.a.useState([$,ee]),a=Object(w.a)(t,2),n=a[0],l=a[1],s=r.a.useState({}),o=Object(w.a)(s,2),i=o[0],u=o[1],m=Object(d.d)((function(e){return e.auth}));r.a.useEffect((function(){}),[]);var E=function(e,t,a,r,s){l(n.map((function(n,l){return l===t&&("grade"===s?n.assessments[a].grading[r][s]=e:"remarks"===s?n.assessments[a].remarks[0].comment=e.target.value:"review"===s?n.assessments[a].review[0].comment=e.target.value:n.assessments[a].grading[r][s]=e.target.value),n}))),u((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(V.a)({},t,!0))}))};return r.a.createElement(r.a.Fragment,null,n.map((function(e,t){return r.a.createElement(M.a,{key:t},r.a.createElement(x.a,null,r.a.createElement(G.a,{className:"m-3"},r.a.createElement(G.a.Header,{as:"h5"},e.lessonName),r.a.createElement(G.a.Body,null,r.a.createElement(z.a,{defaultActiveKey:0,style:{borderBottom:"1px #eee solid"},className:"my-3"},e.assessments.map((function(a,n){return r.a.createElement(Q.a,{eventKey:n,title:a.studentName,key:n,className:"my-3 mx-1"},r.a.createElement(_.a,null,a.grading.map((function(e,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(_.a.Group,{as:M.a,style:{borderBottom:"1px #eee solid"},className:"p-3"},r.a.createElement(_.a.Label,{column:!0,sm:6},e.description),r.a.createElement(x.a,{sm:6},r.a.createElement(Z.a,{initialRating:e.grade,emptySymbol:r.a.createElement(A.a,{icon:X.a,color:"#e6e600"}),fullSymbol:r.a.createElement(A.a,{icon:N.e,color:"#e6e600"}),onChange:function(e){return E(e,t,n,a,"grade")}}))))})),r.a.createElement(_.a.Group,{as:M.a,className:"p-3"},r.a.createElement(x.a,{sm:12},r.a.createElement(_.a.Control,{type:"text",placeholder:"remarks",as:"textarea",readOnly:!e.tutor.includes(m.user._id),value:""===a.remarks[0].comment?"No comment on remarks":a.remarks[0].comment,onChange:function(e){return E(e,t,n,null,"remarks")}}))),r.a.createElement(_.a.Group,{as:M.a,className:"p-3"},r.a.createElement(x.a,{sm:12},r.a.createElement(_.a.Control,{type:"text",placeholder:"review",as:"textarea",readOnly:!e.reviewer.includes(m.user._id),value:""===a.review[0].comment?"No comment on review":a.review[0].comment,onChange:function(e){return E(e,t,n,null,"review")}}))),r.a.createElement(k.a,{variant:"success",disabled:!i.hasOwnProperty(t)||!0!==i[t],onClick:function(){return function(e){console.log("submit form"),u((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(V.a)({},e,!1))}))}(t)}},"Update & Save")))})))))))})))}var ae=a(90),ne=a(88),re=Object(d.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(ae.a)(e,["component","auth"]);return r.a.createElement(c.b,Object.assign({},n,{render:function(e){return a.isLoading?r.a.createElement(ne.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(c.a,{to:"/signin"})}}))}));function le(){var e=Object(d.c)();return r.a.useEffect((function(){e((function(e,t){e({type:"USER_LOADING"}),j.a.get("".concat("https://bbm-heroku.herokuapp.com","/api/auth/user"),y(t)).then((function(t){e({type:"USER_LOADED",payload:t.data})})).catch((function(t){e({type:"AUTH_ERROR"})}))}))}),[]),r.a.createElement(o.a,{basename:"/"},r.a.createElement(R,null),r.a.createElement(O.a,{fluid:!0},r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/signin"},r.a.createElement(D,null)),r.a.createElement(re,{exact:!0,path:"/",component:K}),r.a.createElement(re,{path:"/course/:id",component:te}))))}var se=function(){return r.a.createElement(d.a,{store:I},r.a.createElement(le,null))};a(123);s.a.render(r.a.createElement(se,null),document.getElementById("root"))},91:function(e,t,a){e.exports=a(124)},96:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.2468b8d2.chunk.js.map